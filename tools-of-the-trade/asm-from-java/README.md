# ASM from Java

Experiments to explore generating ASM from Java

## Notes

1. Getting the ASM will require the HotSpot Disassembler (HSDIS) library.

```
javac SimpleTest.java
java -XX:+UnlockDiagnosticVMOptions -XX:+PrintAssembly -XX:PrintAssemblyOptions=intel \
    -Xlog:class+load=info -XX:+LogCompilation \
    -XX:CompileCommand=print,SimpleTest::myadd SimpleTest
```

* `-XX:+UnlockDiagnosticVMOptions`: Unlocks additional diagnostic JVM options needed for +PrintAssembly
* `-XX:+PrintAssembly`: Prints the native assembly code generated by the JIT, needs hsdis lib for usage
* `-XX:PrintAssemblyOptions=intel`: Configures the disassembler to output assembly in Intel syntax
* `-Xlog:class+load=info`: Logs class-loading events at the info level
* `-XX:+LogCompilation`: Logs JIT compilation events
* `-XX:CompileCommand`: Filters ASM being printed

2. I tried building the hsdis library for JDK 23 from source in Intel Mac. Getting a runtime exception when using the dynamic library

3. Ended up downloading a prebuilt binary from https://chriswhocodes.com/hsdis/ for JDK17 and used JDK17

